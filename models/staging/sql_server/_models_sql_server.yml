version: 2


models:
  - name: stg_sql_server__products
    description: >
      Data about all products in demo.
    columns:
      - name: product_id
        description: >
          UUID for each unique product on platform.
      - name: product_name
        description: >
          Name of the product.
      - name: unit_price_usd
        description: >
          Price of the product.
      - name: inventory
        description: >
          Amount of the inventory we have for this product.
      - name: date_load 
        description: >
          Date that the data was loaded.

  - name: stg_sql_server__addresses
    description: Normalized table of addresses with ids hashed.
    columns:
      - name: address_id
      - name: state_id
        data_tests:
            - relationships:
                arguments:
                  field: state_id
                  to: ref("stg_sql_server__states")
      - name: country_id
        data_tests:
              - relationships:
                  arguments:
                    field: country_id
                    to: ref('stg_sql_server__countries')
      - name: zipcode_id
        data_tests:
              - relationships:
                  arguments:
                    field: zipcode_id
                    to: ref("stg_sql_server__zipcodes")
      - name: address
  - name: stg_sql_server__states
    description: States and a given id, created by hashing the name.
    columns:
      - name: state_id
        data_tests:
          - not_null
          - unique
      - name: state_name
    
  - name: stg_sql_server__countries
    description: Countries and a given id, created by hashing the name.
    columns:
      - name: country_id
        data_tests:
          - not_null
          - unique
      - name: country_name
  - name: stg_sql_server__zipcodes
    description: Zipcodes and a given id, created by hashing the code.
    columns:
      - name: zipcode_id
        data_tests:
          - not_null
          - unique
      - name: zipcodes
  - name: stg_sql_server__promos
  - name: stg_sql_server__orders
  - name: stg_sql_server__shipping_service
  - name: stg_sql_server__users
  - name: stg_sql_server__order_items
    description: Order items
    columns:
      - name: order_items_id
        description: surrogate key
        data_tests:
          - not_null
          - unique
      - name: order_id
      - name: product_id
      - name: units
      - name: date_load